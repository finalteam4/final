<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>미세먼지 지도 표시 예시</title>
  <script th:src="'https://maps.googleapis.com/maps/api/js?key=' + ${googleMapsApiKey} + '&libraries=places'"></script>
</head>
<body>
  <div id="map" style="height: 400px;"></div>

  <script>
    // Google Maps API 키
    var googleMapsApiKey = 'AIzaSyDf0SG5J3TQn8Hhoi7Q1EJSXdEg1iI1HK4';

    // 미세먼지 데이터 (가정)
    var dustData = [
      { location: { lat: 37.5665, lng: 126.9780 }, level: 'High' },
      // 다른 미세먼지 데이터 추가
    ];

    function initMap() {
      var map = new google.maps.Map(document.getElementById('map'), {
        center: { lat: 37.5665, lng: 126.9780 },
        zoom: 10
      });

      // 미세먼지 데이터를 기반으로 지도에 마커 추가
      for (var i = 0; i < dustData.length; i++) {
        var marker = new google.maps.Marker({
          position: dustData[i].location,
          map: map,
          title: '미세먼지 수준: ' + dustData[i].level
        });
      }
    }

    // Google Maps API 스크립트 로드에 대한 오류 처리
    function handleApiError() {
      console.log('Google Maps API 로드에 실패했습니다.');
    }
  </script>
  <script th:src="'https://maps.googleapis.com/maps/api/js?key=' + ${googleMapsApiKey} + '&libraries=places&callback=initMap&error_callback=handleApiError'"></script>
</body>
</html>