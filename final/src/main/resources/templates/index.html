<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>안전한 대한민국, PLAN B</title>
<!-- 파비콘 추가 -->
<link rel="stylesheet" href="/css/Mainstyle.css">
<script src="https://kit.fontawesome.com/6673aed616.js" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

</head>
<!-- Main page -->
<body>
<div th:replace="~{header}"></div>
<!------------------- Body1 : 기상특보 한 줄 알림 ----------------------------->
	<section id="weather-caution1"> <!-- main -->
		<div class="slider_wrap">
			<div class="slider_text">
				<div class="slider_inner">
					<div class="slider"><p><span>[ 초미세먼지 주의보 ]&nbsp;</span> 인천(영종,영흥권역)</p></div>
					<div class="slider"><p><span>[ 풍랑 주의보 ]&nbsp;</span> 동해 먼바다 ( 남부 북쪽 바깥 먼바다 , 중부 바깥 먼바다 ), 서해 먼바다( 남부 북쪽 바깥 먼바다 , 남부 남쪽 안쪽 먼바다 , 남부 남쪽 바깥 먼바다 )</p></div>
					<div class="slider"><p><span>[ 강풍 주의보 ]&nbsp;</span> 강원 ( 북부산지 , 중부산지 , 남부산지 ), 경북( 울릉도·독도 , 북동산지 ), 전남( 흑산도·홍도 )</p></div>
					<div class="slider"><p><span>[ 지진 ]&nbsp;</span> 2024.02.08 03:15:44 북한 함경북도 길주 북쪽 57km 지역 규모 2.3 지진 발생</p></div>
				</div>			
			</div>
		</div>
<!-- 		<div class="caution-content"> -->
<!-- 			<p><span>[ 초미세먼지 주의보 ]&nbsp;</span> 경기(중부권), 세종(세종권역), 충남(북부권역)</p> -->
<!-- 		</div> -->
	</section>
<!---------------  Body2 : 날씨정보, 실시간 제보 게시판 ------------------------->
	<section id="weather-realTimeReport">
		<!-- 날씨정보(+미세먼지) -->
		<article class="weaterInfo-airPollution">
			<div class="weather-contentWrap">
				
				<!-- 기온 -->
				<div class="today-weather-wrap">
					<h3 class="today-title">오늘 날씨</h3>
					
					<div class="now-temperatures">
					    <p class="SeoulIcon"></p>
					    <p class="SeoulNowtemp"></p>
					</div>
					<div class="high-temperatures">
						<h3 class="row-high-temp">최고기온 </h3>
					    <p class="SeoulHightemp"> </p>
					</div>
					<div class="row-temperatures">
						<h3 class="row-high-temp">최저기온</h3>
					    <div class="SeoulLowtemp"></div>
					</div>
				</div>
				<!-- 미세먼지 -->
				<div class="content-fineDust"> 
					<dl class="particulateMatter">
						<dt style="font-size:17px; padding-right:10px;">미세먼지</dt>
						<dd style="font-weight:900; font-size:45px;">79</dd>
						<dd style="font-weight:700; font-size:20px;">&nbsp;보통</dd>
					</dl>
					<dl class="fine-particulateMatter">
						<dt style="font-size:17px; padding-right:10px;">초미세먼지</dt>
						<dd style="font-weight:900; font-size:45px;">62</dd>					
						<dd style="font-weight:700; font-size:20px;">&nbsp;나쁨</dd>					
					</dl>
				</div>
			</div>
		</article>
		<!-- 실시간 제보 게시판 -->		
		<article class="realTimeReport-wrap">
			<div class="report-title">
				<p>실시간 제보</p>
				<a th:href="@{/board/}"class="icon-wrap"><i class="fi fi-rr-arrow-circle-right"></i></a>
			</div>
			<!-- <p class="report-text">body2_right box - 실시간 제보(member) 게시판 불러오기</p> -->
			<div>
				<table class="table" id="tbl_list">
					<thead>
						<tr>
							<th scope="col">글분류</th>
							<th scope="col">글제목</th>
							<th scope="col">글쓴이</th>
							<th scope="col">작성일</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="board : ${boardList}">
			                <th>
			                	<span th:if="${board.boardCategory eq 'notice'}"><a th:href="@{/noticeboard/}">공지사항</a></span>
			                	<span th:if="${board.boardCategory eq 'qna'}"><a th:href="@{/qnaboard/}">QnA</a></span>
			                	<span th:if="${board.boardCategory eq 'info1'}"><a th:href="@{/infoboard/?cate=info1}">서울</a></span>
			                	<span th:if="${board.boardCategory eq 'info2'}"><a th:href="@{/infoboard/?cate=info2}">인천/경기</a></span>
			                	<span th:if="${board.boardCategory eq 'info3'}"><a th:href="@{/infoboard/?cate=info3}">강원</a></span>
			                	<span th:if="${board.boardCategory eq 'info4'}"><a th:href="@{/infoboard/?cate=info4}">대전/충청</a></span>
			                	<span th:if="${board.boardCategory eq 'info5'}"><a th:href="@{/infoboard/?cate=info5}">광주/전라</a></span>
			                	<span th:if="${board.boardCategory eq 'info6'}"><a th:href="@{/infoboard/?cate=info6}">부산/경상</a></span>
			                </th>
						    <td class="td_title" style="width:200px;">
							    <a th:href="@{|/board/${board.id}|(page=${boardList.number+1})}">
							    	<span th:text="${board.boardTitle}"></span>
							    	<span style="font-size:small;" th:if="${board.replyCount != 0}" th:text="'[ ' + ${board.replyCount} + ' ]'"></span>
							    </a>
							</td>
		
			                <td th:text="${board.boardWriter}"></td>
			                <td th:utext="${board.updatedDate != null ? #temporals.format(board.updatedDate, 'yyyy-MM-dd hh:mm') : #temporals.format(board.createdDate, 'yyyy-MM-dd hh:mm')}"></td>
			            </tr>
					</tbody>
				</table>
			</div>
		</article>
	</section>	
<!-------- Body3 : 긴급재난문자 , btn3(비상연락망, 재난유관기관, 기상특보) ------------>
	<section id="emergency-circleBtn3-bg">
		<article class="emergency-circleBtn3-wrap">
			<!-- 긴급재난문자(재난문자 api) -->
			<div class="emergency-pinkBox">
				<p class="e-title">긴급 재난문자</p>
				
				<div class="emergency-text" id="content">
					<table id="result1" class="table" >
						<tbody>
							<!-- 데이터 출력 -->
						</tbody>
					</table>
				</div>
			</div>		
			<!-- btn3 - 비상연락망, 재난유관기관, 기상특보 -->
			<div class="useful-three-btn">
				<!-- btn1 : 비상연락망 -->
				<div class="useful-btn">
					<a th:href="@{/contact/emer_contact}">
						<img th:alt="sos" src="/images/sos.png">
						<p>비상연락망</p>	
					</a>		
				</div>
				<!-- btn2 : 재난유관기관 -->
				<div class="useful-btn">
					<a th:href="@{/pages/public-institution}">
						<img th:alt="public_institution" src="/images/public-institutions.png" style="width:100px; height:100px;">
						<p>재난 유관기관</p>
					</a>
				</div>
				<!-- btn3 : 기상특보 - KBS재난포털 기상특보 연결 -->
				<div class="useful-btn">
					<a href="https://d.kbs.co.kr/special/special" target="_blank">
						<img th:alt="special_weather" src="/images/weather.png">
						<p>기상특보</p>
					</a>
				</div>
			</div>
		</article>
	</section>	
<!---------------------- Body4 : 지진 발생 시 행동요령 ------------------------>	
	<section id="actionTips-disaster">
		<div class="actionTips-earthQuake">
			<!-- title + 더보기 -->
			<div class="earthQuake-behavior">
				<p>지진 발생 시 이렇게 행동하세요 !</p>
				<a th:href="@{/board/preparation}">
				 	더보기&nbsp;<i class="fi fi-rr-arrow-circle-right" style="font-size:12px;"></i>
				</a>
			</div>
			<!-- 행동요령 img -->
			<div class="specific-behavior">
				<img th:alt="tips_container" src="/images/tips-container.jpg">
			</div>
		</div>
	</section>
<div th:replace="~{footer}"></div>
<script>
//오늘 날짜출력
	$(document).ready(function () {
	
	    function convertTime() {
	        var now = new Date();
	
	
	        var month = now.getMonth() + 1;
	        var date = now.getDate();
	
	        return '(' + month + '/' + date + ')';
	    }
	
	    var currentTime = convertTime();
	    $('.nowtime').append(currentTime);
	});
	
	
	//제이쿼리사용
	$.getJSON('https://api.openweathermap.org/data/2.5/weather?q=seoul&appid=a8501159eb9e48f3bb16a140c20e9c6f&units=metric', function(WeatherResult) {
		// 기온 출력을 위해 Math.round()를 사용하여 온도 값을 정수로 반올림
		var nowTemp = Math.round(WeatherResult.main.temp);
		var lowTemp = Math.round(WeatherResult.main.temp_min);
		var highTemp = Math.round(WeatherResult.main.temp_max);
	
		$('.SeoulNowtemp').html(nowTemp + '&nbsp;' + '<small>°C</small>');
		$('.SeoulLowtemp').html(lowTemp + '&nbsp;' + '°C');
		$('.SeoulHightemp').html(highTemp + '&nbsp;' + '°C');
		
	// 날씨 아이콘 출력
		var weathericonUrl =
		'<img class="weather-icons" src= "http://openweathermap.org/img/wn/' + WeatherResult.weather[0].icon + '.png" alt="' 
				+ WeatherResult.weather[0].description + '"/>'
		
		$('.SeoulIcon').html(weathericonUrl);
	
	// 기온에 따른 이미지 표시
	var temperature = WeatherResult.main.temp;
	if (temperature <= 10) {
		// 추운 날씨 이미지
		$('.weatherExpression').html('<img src="#" alt="Cold">');
		} else if (temperature >= 20) {
		// 따듯한 날씨 이미지
		$('.weatherExpression').html('<img src="#" alt="Warm">');
		} else {
		// 온화한 날씨 이미지 또는 표시하지 않음
		$('.weatherExpression').html('<img src="#" alt="Cold">');
		}
		});
</script>
<script src="/js/text-slide.js"></script>
<script src="/js/emergency-text.js"></script>
</body>

</html>