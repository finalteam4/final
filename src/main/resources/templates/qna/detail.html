<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>질문게시판</title>
<link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
	<div th:replace="~{header}"></div>

	<div id="content">
		<h2>질문게시판 상세보기</h2>
		<table class="tbl_detail">
			<tr>
				<td>
					<div class="text-left" style="font-size: 33px; font-weight: 500;; font-weight:bold">
						<span th:text="${board.boardTitle}"></span>
					</div>
				    <div style="margin-left: 5px; font-size: 15px" th:if="${board.updatedDate ne null}">
				        작성일시: <span th:text="${#temporals.format(board.createdDate, 'yyyy-MM-dd HH:mm:ss')}"></span>&nbsp;
				        수정일시: <span th:text="${#temporals.format(board.updatedDate, 'yyyy-MM-dd HH:mm:ss')}"></span>
				    </div>
				    <div style="margin-left: 5px; font-size: 15px" th:if="${board.updatedDate eq null}">
				        작성일시: <span th:text="${#temporals.format(board.createdDate, 'yyyy-MM-dd HH:mm:ss')}"></span>    
				    </div>
					<div style="display: flex; justify-content: space-between;">
					    <div th:if="${board.boardHits != null}">
					        조회수: <span th:text="${board.boardHits} + '회'"></span>
					    </div>
					    <div th:if="${board.likeCount != null && board.likeCount != 0}">
					        추천수: <span th:text="${board.likeCount} + '회'"></span>
					    </div>
					</div>
					<hr>
				</td>
			</tr>
			<tr>
				<td>
					<div style="display: flex; justify-content: space-between;">
						<div class="text-left" >
							<p class="font-weight-light" style="font-size: 18px; font-weight:bold">
								 작성자: <span th:text="${board.boardWriter}"></span>
							</p>	
						</div>	
						<div>
							<a th:href="@{|/vote/${board.id}/작성자|}">
						    	[추천]
						    </a>
					    </div>
					</div>		
					<hr style="margin-top:-10px;">
				</td>
			</tr>
			<tr th:if="${not #strings.isEmpty(board.filepath)}">
				<td>
					<img th:src="${board.filepath}" alt="" style="width:500px">
				</td>
			</tr>
			<tr>
				<td>
					<div class="text-left" style="height:400px;">
	                    <span th:text="${board.boardContent}"></span>
	              	</div>
					<hr>
				</td>
			</tr>
			<tr>
				<td>
					<span th:if="${session.sessionId == board.boardWriter}">
						<a th:href="@{|/qnaboard/update/${board.id}|}">
				            <button class="btn btn-outline-secondary">수정</button>
				        </a>
				        <a th:href="@{|/qnaboard/delete/${board.id}|}" onclick="return confirm('정말로 삭제하시겠습니까?')">
				           <button class="btn btn-outline-secondary">삭제</button>
				        </a>
					</span>
					<a th:href="@{/qnaboard/(page=${page})}">
				        <button class="btn btn-outline-secondary">목록</button>
				    </a>
				</td>
			</tr>
		</table>
		<!-- 댓글 -->
		<div class="replyform">
	        <p class="rtitle">댓글</p>
	          <div class = "reply" th:each="reply : ${replyList}">
	            <div class = "replyer">
		            <p th:text=${reply.replyer}></p>
	            </div>
	            <div class = "rcontent">
	            	<p th:text=${reply.rcontent}></p>
	            </div>
	            <div class = "rdate">
		            <p style="font-size: small; font-weight:bold">
					    작성일시: [[${#temporals.format(reply.createdDate, 'yyyy-MM-dd HH:mm:ss')}]]
					    <span th:if="${reply.updatedDate != null}">
					        수정일시: [[${#temporals.format(reply.updatedDate, 'yyyy-MM-dd HH:mm:ss')}]]
					    </span>
					</p>	
					<p th:if="${session.sessionId == reply.replyer}">
					<a th:href="@{|/qnareply/update/${reply.id }|}">수정</a> | 
						<a th:href="@{|/qnareply/delete/${reply.id }|}">삭제</a>
					</p>
	            </div>
	          </div>
	          <div class="replyWrite">
	            <!-- th:if="${not empty sessionId}" -->
				<form th:action="@{/qnareply/write}" method="post" id="replyform">
					<input type="hidden" name="boardId" th:value="${board.id}">
					<input type="hidden" name="replyer" th:value="${session.sessionId}">
					<p>
					<textarea name="rcontent" id="replyContent" class="form-control" rows="5"
						placeholder="댓글 작성란" style="resize: none;" required></textarea>
					</p>
					<button type="submit" class="btn btn-outline-secondary">등록</button>
				</form>	

			</div>	
	     </div>		
	</div>
</body>
</html>